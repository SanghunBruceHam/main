name: IndexNow Auto Ping

on:
  push:
    branches:
      - main  # ì‹¤ì œ ìš´ì˜ ë¸Œëœì¹˜ë¡œ ë³€ê²½
    paths:
      - '**.html'

jobs:
  indexnow:
    runs-on: ubuntu-latest
    steps:
      - name: Send IndexNow Pings
        run: |
          FILES=$(git diff --name-only ${{ github.event.before }} ${{ github.sha }} | grep '\.html$')
          for file in $FILES; do
            URL="https://mahalohana-bruce.com/${file}"
            echo "ğŸ”— Pinging: $URL"
            curl "https://www.bing.com/indexnow?url=${URL}&key=9a4d441f03954eb89ed9bb85fe40c36c"
          done
